{"version":3,"sources":["config.js","auth/index.js","core/Menu.js","core/cartHealpers.js","core/Layout.js","user/Signup.js","user/Signin.js","core/apiCore.js","core/ShowImage.js","core/Card.js","core/Search.js","core/Home.js","auth/PrivateRoute.js","auth/AdminRoute.js","user/UserDashboard.js","user/apiUser.js","user/AdminDashboard.js","admin/apiAdmin.js","admin/AddCategory.js","admin/AddProduct.js","core/Checkbox.js","core/RadioBox.js","core/fixedPrices.js","core/Shop.js","core/Product.js","core/Checkout.js","core/Cart.js","admin/Order.js","user/Profile.js","admin/ManageProducts.js","admin/UpdateProduct.js","Routes.js","index.js"],"names":["API","process","isAuthenticated","window","localStorage","getItem","JSON","parse","isActive","history","path","location","pathname","color","withRouter","className","style","to","length","user","role","cursor","onClick","next","undefined","removeItem","fetch","method","then","response","console","log","catch","err","signout","push","Layout","title","description","children","Signup","useState","name","email","password","error","success","values","setValues","handleChange","event","target","value","clickSubmit","preventDefault","headers","Accept","body","stringify","json","data","display","onChange","type","Signin","loading","redirectToReferrer","signin","setItem","authenticate","getProducts","sortBy","getCategories","getFilteredProducts","skip","limit","filters","ShowImage","item","url","src","_id","alt","maxHeight","maxWidth","Card","product","showViewProductButton","showAddToCartButton","cartUpdate","showRemoveProductButton","setRun","f","run","redirect","setRedirect","count","setCount","addToCart","cart","Array","from","Set","map","p","id","find","addItem","productId","i","updateItem","shouldRedirect","substring","price","category","moment","createdAt","fromNow","quantity","showViewButton","showAddToCartBtn","splice","showRemoveButton","showCartUpdateOptions","Search","catergories","search","results","searched","setData","searchData","params","query","queryString","list","searchSubmit","e","searchMessage","useEffect","onSubmit","c","key","placeholder","border","searchedProducts","Home","productBySell","setProductBySell","productByArrival","setProductByArrival","setError","PrivateRoute","Component","component","rest","render","props","state","AdminRoute","Dashboard","setHistory","token","init","userId","Authorization","getPurchaseHistory","h","products","purchaseHistory","AdminDashboard","getGetCategories","AddCategory","setName","setSuccess","createCategory","showSuccess","showError","autoFocus","required","AddProduct","categories","shipping","photo","createdProduct","redirectToProfile","formData","FormData","files","set","createProduct","accept","Checkbox","handleFilters","checked","setChecked","handleToggle","currentCategoryId","indexOf","newCheckedCategoryId","RadioBox","prices","setValue","array","Shop","catergory","myFilters","setMyFilters","setCategories","setSkip","size","setSize","filteredResults","setFilteredResults","loadFilteredResults","newFilters","loadMore","toSkip","filterBy","priceValues","handlePrice","parseInt","Product","setProduct","related","setRelated","loadSingleProduct","read","listRelated","match","Checkout","clientToken","instance","address","getToken","getBraintreeClientToken","getTotal","reduce","currentValue","nextValue","deliveryAddress","handleAddress","buy","requestPaymentMethod","paymentData","paymentMethodNonce","nonce","amount","processPayment","createOrderData","transaction_id","transaction","order","createOrder","reload","message","showDropIn","onBlur","options","authorization","paypal","flow","onInstance","Cart","items","setItems","showItems","Orders","orders","setOrders","statusValues","setStatusValues","loadOrders","listOrders","loadStatusValues","getStatusValues","showInput","readOnly","handleStatusChange","orderId","status","updateOrderStatus","o","oIndex","borderBottom","index","showStatus","pIndex","padding","Profile","update","auth","updateUser","profileUpdate","redirectUser","ManageProducts","setProducts","loadProducts","destroy","deleteProduct","UpdateProduct","getProduct","initCategories","updateProduct","Routes","exact","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.ff773073.chunk.js","sourcesContent":["export const API = process.env.REACT_APP_API_URL;","import { API } from \"../config\";\r\n\r\nexport const signup = (user) => {\r\n  return fetch(`${API}/signup`, {\r\n    method: \"POST\",\r\n    headers: {\r\n      Accept: \"application/json\",\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n    body: JSON.stringify(user),\r\n  })\r\n    .then((response) => {\r\n      return response.json();\r\n    })\r\n    .catch((err) => {\r\n      console.log(err);\r\n    });\r\n};\r\n\r\nexport const signin = (user) => {\r\n  return fetch(`${API}/signin`, {\r\n    method: \"POST\",\r\n    headers: {\r\n      Accept: \"application/json\",\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n    body: JSON.stringify(user),\r\n  })\r\n    .then((response) => {\r\n      return response.json();\r\n    })\r\n    .catch((err) => {\r\n      console.log(err);\r\n    });\r\n};\r\n\r\nexport const authenticate = (data, next) => {\r\n  if (typeof window != undefined) {\r\n    localStorage.setItem(\"jwt\", JSON.stringify(data));\r\n    next();\r\n  }\r\n};\r\n\r\nexport const signout = (next) => {\r\n  if (typeof window != undefined) {\r\n    localStorage.removeItem(\"jwt\");\r\n    next();\r\n    return fetch(`${API}/signout`, {\r\n      method: \"GET\",\r\n    })\r\n      .then((response) => console.log(\"signout \", response))\r\n      .catch((err) => console.log(err));\r\n  }\r\n};\r\n\r\nexport const isAuthenticated = () => {\r\n  if (typeof window == \"undefined\") {\r\n    return false;\r\n  }\r\n  if (localStorage.getItem(\"jwt\")) {\r\n    return JSON.parse(localStorage.getItem(\"jwt\"));\r\n  } else {\r\n    return false;\r\n  }\r\n};","import React, { Fragment } from \"react\";\r\nimport { Link, withRouter } from \"react-router-dom\";\r\nimport { signout, isAuthenticated } from \"../auth\";\r\nimport { itemTotal } from \"./cartHealpers\";\r\n\r\nconst isActive = (history, path) => {\r\n  if (history.location.pathname === path) {\r\n    return { color: \"#ff9900\" };\r\n  } else {\r\n    return { color: \"#ffffff\" };\r\n  }\r\n};\r\n\r\nconst Menu = ({ history }) => (\r\n  <div>\r\n    <ul className=\"nav nav-tabs bg-primary\">\r\n      <li className=\"nav-item\">\r\n        <Link className=\"nav-link\" style={isActive(history, \"/\")} to=\"/\">\r\n          Home\r\n        </Link>\r\n      </li>\r\n      <li className=\"nav-item\">\r\n        <Link\r\n          className=\"nav-link\"\r\n          style={isActive(history, \"/shop\")}\r\n          to=\"/shop\"\r\n        >\r\n          Shop\r\n        </Link>\r\n      </li>\r\n      <li className=\"nav-item\">\r\n        <Link\r\n          className=\"nav-link\"\r\n          style={isActive(history, \"/cart\")}\r\n          to=\"/cart\"\r\n        >\r\n          Cart\r\n          <sup>\r\n            <small className=\"cart-badge\">{itemTotal()}</small>\r\n          </sup>\r\n        </Link>\r\n      </li>\r\n\r\n      {isAuthenticated() && isAuthenticated().user.role === 0 && (\r\n        <li className=\"nav-item\">\r\n          <Link\r\n            className=\"nav-link\"\r\n            style={isActive(history, \"/user/dashboard\")}\r\n            to=\"/user/dashboard\"\r\n          >\r\n            Dashboard\r\n          </Link>\r\n        </li>\r\n      )}\r\n\r\n      {isAuthenticated() && isAuthenticated().user.role === 1 && (\r\n        <li className=\"nav-item\">\r\n          <Link\r\n            className=\"nav-link\"\r\n            style={isActive(history, \"/admin/dashboard\")}\r\n            to=\"/admin/dashboard\"\r\n          >\r\n            Dashboard\r\n          </Link>\r\n        </li>\r\n      )}\r\n\r\n      {!isAuthenticated() && (\r\n        <Fragment>\r\n          <li className=\"nav-item\">\r\n            <Link\r\n              className=\"nav-link\"\r\n              style={isActive(history, \"/signin\")}\r\n              to=\"/signin\"\r\n            >\r\n              Signin\r\n            </Link>\r\n          </li>\r\n\r\n          <li className=\"nav-item\">\r\n            <Link\r\n              className=\"nav-link\"\r\n              style={isActive(history, \"/signup\")}\r\n              to=\"/signup\"\r\n            >\r\n              Signup\r\n            </Link>\r\n          </li>\r\n        </Fragment>\r\n      )}\r\n\r\n      {isAuthenticated() && (\r\n        <li className=\"nav-item\">\r\n          <span\r\n            className=\"nav-link\"\r\n            style={{ cursor: \"pointer\", color: \"#ffffff\" }}\r\n            onClick={() =>\r\n              signout(() => {\r\n                history.push(\"/\");\r\n              })\r\n            }\r\n          >\r\n            Signout\r\n          </span>\r\n        </li>\r\n      )}\r\n    </ul>\r\n  </div>\r\n);\r\n\r\nexport default withRouter(Menu);\r\n","export const addItem = (item = [], count = 0, next = f => f) => {\r\n  let cart = [];\r\n  if (typeof window !== 'undefined') {\r\n      if (localStorage.getItem('cart')) {\r\n          cart = JSON.parse(localStorage.getItem('cart'));\r\n      }\r\n      cart.push({\r\n          ...item,\r\n          count: 1\r\n      });\r\n\r\n      // remove duplicates\r\n      // build an Array from new Set and turn it back into array using Array.from\r\n      // so that later we can re-map it\r\n      // new set will only allow unique values in it\r\n      // so pass the ids of each object/product\r\n      // If the loop tries to add the same value again, it'll get ignored\r\n      // ...with the array of ids we got on when first map() was used\r\n      // run map() on it again and return the actual product from the cart\r\n\r\n      cart = Array.from(new Set(cart.map(p => p._id))).map(id => {\r\n          return cart.find(p => p._id === id);\r\n      });\r\n\r\n      localStorage.setItem('cart', JSON.stringify(cart));\r\n      next();\r\n  }\r\n};\r\n\r\nexport const itemTotal = () => {\r\n  if (typeof window !== 'undefined') {\r\n      if (localStorage.getItem('cart')) {\r\n          return JSON.parse(localStorage.getItem('cart')).length;\r\n      }\r\n  }\r\n  return 0;\r\n};\r\n\r\nexport const getCart = () => {\r\n  if (typeof window !== 'undefined') {\r\n      if (localStorage.getItem('cart')) {\r\n          return JSON.parse(localStorage.getItem('cart'));\r\n      }\r\n  }\r\n  return [];\r\n};\r\n\r\nexport const updateItem = (productId, count) => {\r\n  let cart = [];\r\n  if (typeof window !== 'undefined') {\r\n      if (localStorage.getItem('cart')) {\r\n          cart = JSON.parse(localStorage.getItem('cart'));\r\n      }\r\n\r\n      cart.map((product, i) => {\r\n          if (product._id === productId) {\r\n              cart[i].count = count;\r\n          }\r\n      });\r\n\r\n      localStorage.setItem('cart', JSON.stringify(cart));\r\n  }\r\n};\r\n\r\nexport const removeItem = productId => {\r\n  let cart = [];\r\n  if (typeof window !== 'undefined') {\r\n      if (localStorage.getItem('cart')) {\r\n          cart = JSON.parse(localStorage.getItem('cart'));\r\n      }\r\n\r\n      cart.map((product, i) => {\r\n          if (product._id === productId) {\r\n              cart.splice(i, 1);\r\n          }\r\n      });\r\n\r\n      localStorage.setItem('cart', JSON.stringify(cart));\r\n  }\r\n  return cart;\r\n};\r\n\r\nexport const emptyCart = next => { \r\n  if (typeof window !== 'undefined') {\r\n      localStorage.removeItem('cart');\r\n      next();\r\n  }\r\n};\r\n","import React from \"react\";\r\nimport Menu from \"./Menu\";\r\nimport \"../styles.css\"\r\nconst Layout = ({\r\n  title = \"Title\",\r\n  description = \"Description\",\r\n  className,\r\n  children,\r\n}) => (\r\n  <div>\r\n    <Menu />\r\n    <div className=\"jumbotron\">\r\n      <h2>{title}</h2>\r\n      <p className=\"lead\">{description}</p>\r\n    </div>\r\n    <div className={className}>{children}</div>\r\n  </div>\r\n);\r\n\r\nexport default Layout;\r\n","\r\nimport React, { useState } from \"react\";\r\nimport Layout from '../core/Layout';\r\nimport { signup } from '../auth'\r\n\r\nconst Signup = () => {\r\n    const [values, setValues] = useState({\r\n        name: '',\r\n        email: '',\r\n        password: '',\r\n        error: '',\r\n        success: false\r\n    });\r\n\r\n    const { name, email, password, success, error } = values\r\n\r\n    const handleChange = name => event => {\r\n        setValues({ ...values, error: false, [name]: event.target.value })\r\n    };\r\n\r\n\r\n    const clickSubmit = (event) => {\r\n        event.preventDefault()\r\n        signup({ name, email, password })\r\n            .then(data => {\r\n                if (data.error) {\r\n                    setValues({ ...values, error: data.error, success: false })\r\n                } else {\r\n                    setValues({\r\n                        ...values,\r\n                        name: '',\r\n                        email: '',\r\n                        password: '',\r\n                        success: true\r\n                    });\r\n                }\r\n            })\r\n    }\r\n\r\n    const signUpForm = () => (\r\n        <form>\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Name</label>\r\n                <input onChange={handleChange('name')} type=\"text\"\r\n                    className=\"form-control\"\r\n                    value={name}\r\n                />\r\n            </div>\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Email</label>\r\n                <input onChange={handleChange('email')} type=\"email\"\r\n                    className=\"form-control\"\r\n                    value={email}\r\n                />\r\n            </div>\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Password</label>\r\n                <input onChange={handleChange('password')} type=\"password\"\r\n                    className=\"form-control\"\r\n                    value={password} />\r\n            </div>\r\n            <button onClick={clickSubmit} className=\"btn btn-primary\">Submit</button>\r\n        </form>\r\n    );\r\n\r\n    const showError = () => (\r\n        <div className=\"alert alert-danger\" style={{ display: error ? '' : 'none' }}>\r\n            {error}\r\n        </div>\r\n    )\r\n    const showSuccess = () => (\r\n        <div className=\"alert alert-info\" style={{ display: success ? '' : 'none' }}>\r\n            New account is created please signin\r\n        </div>\r\n    )\r\n    return (\r\n        <Layout title=\"Signup\" description=\"Sign UP to Node React E-commerce App\" className=\"container col-md-8 offset-md-2\">\r\n            {showError()}\r\n            {showSuccess()}\r\n            {signUpForm()}\r\n        </Layout>\r\n    )\r\n}\r\n\r\nexport default Signup","import React, { useState } from \"react\";\r\nimport Layout from \"../core/Layout\";\r\nimport { signin, authenticate, isAuthenticated } from \"../auth\";\r\nimport { Redirect } from \"react-router-dom\";\r\n\r\nconst Signin = () => {\r\n  const [values, setValues] = useState({\r\n    email: \"\",\r\n    password: \"\",\r\n    error: \"\",\r\n    loading: false,\r\n    redirectToReferrer: false,\r\n  });\r\n\r\n  const { email, password, loading, error, redirectToReferrer } = values;\r\n  const { user } = isAuthenticated();\r\n\r\n  const handleChange = (name) => (event) => {\r\n    setValues({ ...values, error: false, [name]: event.target.value });\r\n  };\r\n\r\n  const clickSubmit = (event) => {\r\n    event.preventDefault();\r\n    setValues({ ...values, error: false, loading: true });\r\n    signin({ email, password }).then((data) => {\r\n      if (data.error) {\r\n        setValues({ ...values, error: data.error, loading: false });\r\n      } else {\r\n        authenticate(data, () => {\r\n          setValues({\r\n            ...values,\r\n            redirectToReferrer: true,\r\n          });\r\n        });\r\n      }\r\n    });\r\n  };\r\n\r\n  const signUpForm = () => (\r\n    <form>\r\n      <div className=\"form-group\">\r\n        <label className=\"text-muted\">Email</label>\r\n        <input\r\n          onChange={handleChange(\"email\")}\r\n          type=\"email\"\r\n          className=\"form-control\"\r\n          value={email}\r\n        />\r\n      </div>\r\n      <div className=\"form-group\">\r\n        <label className=\"text-muted\">Password</label>\r\n        <input\r\n          onChange={handleChange(\"password\")}\r\n          type=\"password\"\r\n          className=\"form-control\"\r\n          value={password}\r\n        />\r\n      </div>\r\n      <button onClick={clickSubmit} className=\"btn btn-primary\">\r\n        Submit\r\n      </button>\r\n    </form>\r\n  );\r\n\r\n  const showError = () => (\r\n    <div\r\n      className=\"alert alert-danger\"\r\n      style={{ display: error ? \"\" : \"none\" }}\r\n    >\r\n      {error}\r\n    </div>\r\n  );\r\n  const showLoading = () =>\r\n    loading && <div className=\"alert alert-info \">Loading...</div>;\r\n\r\n  const redirectUser = () => {\r\n    if (redirectToReferrer) {\r\n      if (user && user.role === 1) {\r\n        return <Redirect to=\"/admin/dashboard\" />;\r\n      } else {\r\n        return <Redirect to=\"/user/dashboard\" />;\r\n      }\r\n    }\r\n    if (isAuthenticated()) {\r\n      return <Redirect to=\"/\" />;\r\n    }\r\n  };\r\n  return (\r\n    <Layout\r\n      title=\"Signin\"\r\n      description=\"Sign IN to Node React E-commerce App\"\r\n      className=\"container col-md-8 offset-md-2\"\r\n    >\r\n      {showError()}\r\n      {showLoading()}\r\n      {signUpForm()}\r\n      {redirectUser()}\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default Signin;\r\n","import { API } from \"../config\";\r\nimport queryString from \"query-string\";\r\n\r\nexport const getProducts = (sortBy) => {\r\n  return fetch(`${API}/products?sortBy=${sortBy}&order=desc&limit=6`, {\r\n    method: \"GET\",\r\n  })\r\n    .then((response) => {\r\n      return response.json();\r\n    })\r\n    .catch((err) => console.log(err));\r\n};\r\n\r\nexport const getCategories = () => {\r\n  return fetch(`${API}/categories`, {\r\n    method: \"GET\",\r\n  })\r\n    .then((response) => {\r\n      return response.json();\r\n    })\r\n    .catch((err) => console.log(err));\r\n};\r\n\r\nexport const getFilteredProducts = (skip, limit, filters = {}) => {\r\n  const data = {\r\n    limit,\r\n    skip,\r\n    filters,\r\n  };\r\n  console.log(\"limit\", data);\r\n  return fetch(`${API}/products/by/search`, {\r\n    method: \"POST\",\r\n    headers: {\r\n      Accept: \"application/json\",\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n    body: JSON.stringify(data),\r\n  })\r\n    .then((response) => {\r\n      return response.json();\r\n    })\r\n    .catch((err) => {\r\n      console.log(err);\r\n    });\r\n};\r\n\r\nexport const list = (params) => {\r\n  const query = queryString.stringify(params);\r\n  console.log(\"query \", query);\r\n  return fetch(`${API}/products/search?${query}`, {\r\n    method: \"GET\",\r\n  })\r\n    .then((response) => {\r\n      return response.json();\r\n    })\r\n    .catch((err) => console.log(err));\r\n};\r\n\r\nexport const read = (productId) => {\r\n  return fetch(`${API}/product/${productId}`, {\r\n    method: \"GET\",\r\n  })\r\n    .then((response) => {\r\n      return response.json();\r\n    })\r\n    .catch((err) => console.log(err));\r\n};\r\n\r\nexport const listRelated = (productId) => {\r\n  return fetch(`${API}/products/related/${productId}`, {\r\n    method: \"GET\",\r\n  })\r\n    .then((response) => {\r\n      return response.json();\r\n    })\r\n    .catch((err) => console.log(err));\r\n};\r\n\r\nexport const getBraintreeClientToken = (userId, token) => {\r\n  return fetch(`${API}/braintree/getToken/${userId}`, {\r\n    method: \"GET\",\r\n    headers: {\r\n      Accept: \"application/json\",\r\n      \"Content-Type\": \"application/json\",\r\n      Authorization: `Bearer ${token}`,\r\n    },\r\n  })\r\n    .then((response) => {\r\n      return response.json();\r\n    })\r\n    .catch((err) => console.log(err));\r\n};\r\n\r\nexport const processPayment = (userId, token, paymentData) => {\r\n  return fetch(`${API}/braintree/payment/${userId}`, {\r\n    method: \"POST\",\r\n    headers: {\r\n      Accept: \"application/json\",\r\n      \"Content-Type\": \"application/json\",\r\n      Authorization: `Bearer ${token}`,\r\n    },\r\n    body: JSON.stringify(paymentData),\r\n  })\r\n    .then((response) => {\r\n      return response.json();\r\n    })\r\n    .catch((err) => console.log(err));\r\n};\r\n\r\nexport const createOrder = (userId, token, createOrderData) => {\r\n  return fetch(`${API}/order/create/${userId}`, {\r\n    method: \"POST\",\r\n    headers: {\r\n      Accept: \"application/json\",\r\n      \"Content-Type\": \"application/json\",\r\n      Authorization: `Bearer ${token}`,\r\n    },\r\n    body: JSON.stringify({ order: createOrderData }),\r\n  })\r\n    .then((response) => {\r\n      return response.json();\r\n    })\r\n    .catch((err) => console.log(err));\r\n};\r\n","import React from \"react\";\r\nimport { API } from \"../config\";\r\n\r\nconst ShowImage = ({ item, url }) => (\r\n  <div className=\"product-img\">\r\n    <img\r\n      src={`${API}/${url}/photo/${item._id}`}\r\n      alt={item.name}\r\n      className=\"mb-3\"\r\n      style={{maxHeight: \"100%\", maxWidth:\"100%\"}}\r\n    />\r\n  </div>\r\n);\r\n\r\nexport default ShowImage;\r\n","import React, { useState } from 'react';\r\nimport { Link, Redirect } from 'react-router-dom';\r\nimport ShowImage from './ShowImage';\r\nimport moment from 'moment';\r\nimport { addItem, updateItem, removeItem } from './cartHealpers';\r\n\r\nconst Card = ({\r\n  product,\r\n  showViewProductButton = true,\r\n  showAddToCartButton = true,\r\n  cartUpdate = false,\r\n  showRemoveProductButton = false,\r\n  setRun = f => f,\r\n  run = undefined\r\n  // changeCartSize\r\n}) => {\r\n  const [redirect, setRedirect] = useState(false);\r\n  const [count, setCount] = useState(product.count);\r\n\r\n  const showViewButton = showViewProductButton => {\r\n    return (\r\n      showViewProductButton && (\r\n        <Link to={`/product/${product._id}`} className=\"mr-2\">\r\n          <button className=\"btn btn-outline-primary mt-2 mb-2 card-btn-1\">View Product</button>\r\n        </Link>\r\n      )\r\n    );\r\n  };\r\n  const addToCart = () => {\r\n    // console.log('added');\r\n    addItem(product, setRedirect(true));\r\n  };\r\n\r\n  const shouldRedirect = redirect => {\r\n    if (redirect) {\r\n      return <Redirect to=\"/cart\" />;\r\n    }\r\n  };\r\n\r\n  const showAddToCartBtn = showAddToCartButton => {\r\n    return (\r\n      showAddToCartButton && (\r\n        <button onClick={addToCart} className=\"btn btn-outline-warning mt-2 mb-2 card-btn-1  \">\r\n          Add to cart\r\n        </button>\r\n      )\r\n    );\r\n  };\r\n\r\n  const showStock = quantity => {\r\n    return quantity > 0 ? (\r\n      <span className=\"badge badge-primary badge-pill\">In Stock </span>\r\n    ) : (\r\n      <span className=\"badge badge-primary badge-pill\">Out of Stock </span>\r\n    );\r\n  };\r\n\r\n  const handleChange = productId => event => {\r\n    setRun(!run); // run useEffect in parent Cart\r\n    setCount(event.target.value < 1 ? 1 : event.target.value);\r\n    if (event.target.value >= 1) {\r\n      updateItem(productId, event.target.value);\r\n    }\r\n  };\r\n\r\n  const showCartUpdateOptions = cartUpdate => {\r\n    return (\r\n      cartUpdate && (\r\n        <div>\r\n          <div className=\"input-group mb-3\">\r\n            <div className=\"input-group-prepend\">\r\n              <span className=\"input-group-text\">Adjust Quantity</span>\r\n            </div>\r\n            <input type=\"number\" className=\"form-control\" value={count} onChange={handleChange(product._id)} />\r\n          </div>\r\n        </div>\r\n      )\r\n    );\r\n  };\r\n  const showRemoveButton = showRemoveProductButton => {\r\n    return (\r\n      showRemoveProductButton && (\r\n        <button\r\n          onClick={() => {\r\n            removeItem(product._id);\r\n            setRun(!run); // run useEffect in parent Cart\r\n          }}\r\n          className=\"btn btn-outline-danger mt-2 mb-2\"\r\n        >\r\n          Remove Product\r\n        </button>\r\n      )\r\n    );\r\n  };\r\n  return (\r\n    <div className=\"card \">\r\n      <div className=\"card-header card-header-1 \">{product.name}</div>\r\n      <div className=\"card-body\">\r\n        {shouldRedirect(redirect)}\r\n        <ShowImage item={product} url=\"product\" />\r\n        <p className=\"card-p  mt-2\">{product.description.substring(0, 100)} </p>\r\n        <p className=\"card-p black-10\">$ {product.price}</p>\r\n        <p className=\"black-9\">Category: {product.category && product.category.name}</p>\r\n        <p className=\"black-8\">Added on {moment(product.createdAt).fromNow()}</p>\r\n        {showStock(product.quantity)}\r\n        <br />\r\n\r\n        {showViewButton(showViewProductButton)}\r\n\r\n        {showAddToCartBtn(showAddToCartButton)}\r\n\r\n        {showRemoveButton(showRemoveProductButton)}\r\n\r\n        {showCartUpdateOptions(cartUpdate)}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Card;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { getCategories, list } from \"./apiCore\";\r\nimport  Card from \"./Card\";\r\n\r\nconst Search = () => {\r\n  const [data, setData] = useState({\r\n    catergories: [],\r\n    category: \"\",\r\n    search: \"\",\r\n    results: [],\r\n    searched: false,\r\n  });\r\n\r\n  const { catergories, category, search, results, searched } = data;\r\n\r\n  const loadCategories = () => {\r\n    getCategories().then((data) => {\r\n      if (data.error) {\r\n        console.log(\"data.error\", data.error);\r\n      } else {\r\n        setData({ ...data, catergories: data });\r\n      }\r\n    });\r\n  };\r\n\r\n  const searchData = () => {\r\n    if (search) {\r\n      list({ search: search || undefined, category: category }).then(\r\n        (response) => {\r\n          if (response.error) {\r\n            console.log(response.error);\r\n          } else {\r\n            setData({ ...data, results: response, searched: true });\r\n          }\r\n        }\r\n      );\r\n    }\r\n  };\r\n\r\n  const searchSubmit = (e) => {\r\n    e.preventDefault();\r\n    searchData();\r\n  };\r\n\r\n  const handleChange = (name) => (event) => {\r\n    setData({ ...data, [name]: event.target.value, searched: false });\r\n  };\r\n\r\n  const searchMessage = (searched, results) => {\r\n    if (searched && results.length > 0) {\r\n      return `Found ${results.length} products`;\r\n    }\r\n    if (searched && results.length < 1) {\r\n      return `No products found `;\r\n    }\r\n  };\r\n\r\n  const searchedProducts = (results = []) => {\r\n    return (\r\n      <div>\r\n        <h2 className=\"mt-4 mb-4\">{searchMessage(searched, results)}</h2>\r\n        <div className=\"row\">\r\n          {results.map((product, i) => (\r\n            <Card key={i} product={product} />\r\n          ))}\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const searchForm = () => (\r\n    <form onSubmit={searchSubmit}>\r\n      <span className=\"input-group-text\">\r\n        <div className=\"input-group input-group-lg\">\r\n          <div className=\"input-group-prepend\">\r\n            <select className=\"btn mr-2\" onChange={handleChange(\"category\")}>\r\n              <option value=\"All\">All</option>\r\n              {catergories.map((c, i) => (\r\n                <option key={i} value={c._id}>\r\n                  {c.name}\r\n                </option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n          <input\r\n            type=\"search\"\r\n            className=\"form-control\"\r\n            onChange={handleChange(\"search\")}\r\n            placeholder=\"Search by name\"\r\n          />\r\n        </div>\r\n        <div className=\"btn input-group-append\" style={{ border: \"none\" }}>\r\n          <button className=\"input-group-text\">Search</button>\r\n        </div>\r\n      </span>\r\n    </form>\r\n  );\r\n\r\n  useEffect(() => {\r\n    loadCategories();\r\n  }, []);\r\n  return (\r\n    <div className=\"row\">\r\n      <div className=\"container mb-3\">{searchForm()}</div>\r\n      <div className=\"container-fluid mb-3\">{searchedProducts(results)}</div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Search;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport Layout from \"./Layout\";\r\nimport { getProducts } from \"./apiCore\";\r\nimport Card from \"./Card\";\r\nimport Search from \"./Search\";\r\nconst Home = () => {\r\n  const [productBySell, setProductBySell] = useState([]);\r\n  const [productByArrival, setProductByArrival] = useState([]);\r\n  const [error, setError] = useState(false);\r\n\r\n  const loadProductsBySell = () => {\r\n    getProducts(\"sold\").then((data) => {\r\n      if (data.error) {\r\n        setError(data.error);\r\n      } else {\r\n        setProductBySell(data);\r\n      }\r\n    });\r\n  };\r\n\r\n  const loadProductsByArrival = () => {\r\n    getProducts(\"createdAt\").then((data) => {\r\n      if (data.error) {\r\n        setError(data.error);\r\n      } else {\r\n        setProductByArrival(data);\r\n      }\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    loadProductsByArrival();\r\n    loadProductsBySell();\r\n  }, []);\r\n  return (\r\n    <Layout\r\n      title=\"Home page\"\r\n      description=\"Node React E-commerce App\"\r\n      className=\"container-fluid\"\r\n    >\r\n      <Search />\r\n      <h2 className=\"mb-4\">New Arrivals</h2>\r\n      <div className=\"row\">\r\n        {productByArrival.map((product, i) => (\r\n          <div className=\" col-4 mb-3\">\r\n            <Card key={i} product={product} />\r\n          </div>\r\n        ))}\r\n      </div>\r\n      <h2 className=\"mb-4\">Best Sellers</h2>\r\n      <div className=\"row\">\r\n        {productBySell.map((product, i) => (\r\n          <div className=\" col-4 mb-3\">\r\n            <Card key={i} product={product} />\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </Layout>\r\n  );\r\n};\r\nexport default Home;\r\n","import React, { Component } from \"react\";\r\nimport { Route, Redirect } from \"react-router-dom\";\r\nimport { isAuthenticated } from \"./index\";\r\n\r\nconst PrivateRoute = ({ component: Component, ...rest }) => (\r\n    <Route {...rest} render={props => isAuthenticated() ? (\r\n        <Component {...props} />\r\n    ) : (\r\n            <Redirect to={{ pathname: '/signin', state: { from: props.location } }}\r\n            />\r\n        )}\r\n    />\r\n)\r\n\r\nexport default PrivateRoute;","import React, { Component } from \"react\";\r\nimport { Route, Redirect } from \"react-router-dom\";\r\nimport { isAuthenticated } from \"./index\";\r\n\r\nconst AdminRoute = ({ component: Component, ...rest }) => (\r\n  <Route\r\n    {...rest}\r\n    render={(props) =>\r\n      isAuthenticated() && isAuthenticated().user.role === 1 ? (\r\n        <Component {...props} />\r\n      ) : (\r\n        <Redirect\r\n          to={{ pathname: \"/signin\", state: { from: props.location } }}\r\n        />\r\n      )\r\n    }\r\n  />\r\n);\r\n\r\nexport default AdminRoute;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport Layout from \"../core/Layout\";\r\nimport { isAuthenticated } from \"../auth/index\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { getPurchaseHistory } from \"./apiUser\";\r\nimport moment from \"moment\";\r\n\r\nconst Dashboard = () => {\r\n  const [history, setHistory] = useState([]);\r\n  const {\r\n    user: { _id, name, email, role },\r\n  } = isAuthenticated();\r\n  const token = isAuthenticated().token;\r\n\r\n  const init = (userId, token) => {\r\n    getPurchaseHistory(userId, token).then((data) => {\r\n      if (data.error) {\r\n        console.log(data.error);\r\n      } else {\r\n        setHistory(data);\r\n      }\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    init(_id, token);\r\n  }, []);\r\n\r\n  const userLinks = () => {\r\n    return (\r\n      <div className=\"card\">\r\n        <h4 className=\"card-header\">\r\n          User Links\r\n          <ul className=\"list-group\">\r\n            <li className=\"list-group-item\">\r\n              <Link className=\"nav-link\" to=\"/cart\">\r\n                My Cart\r\n              </Link>\r\n            </li>\r\n            <li className=\"list-group-item\">\r\n              <Link className=\"nav-link\" to={`/profile/${_id}`}>\r\n                Update Profile\r\n              </Link>\r\n            </li>\r\n          </ul>\r\n        </h4>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const userInfo = () => {\r\n    return (\r\n      <div className=\"card mb-5\">\r\n        <h3 className=\"card-header\">User Information</h3>\r\n        <ul className=\"list-group\">\r\n          <li className=\"list-group-item\">{name}</li>\r\n          <li className=\"list-group-item\">{email}</li>\r\n          <li className=\"list-group-item\">\r\n            {role === 1 ? \"Admin\" : \"Register User\"}\r\n          </li>\r\n        </ul>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const purchaseHistory = (history) => {\r\n    return (\r\n      <div className=\"card mb-5\">\r\n        <h3 className=\"card-header\">Purchase history</h3>\r\n        <ul className=\"list-group\">\r\n          <li className=\"list-group-item\">\r\n            {history.map((h, i) => {\r\n              return (\r\n                <div>\r\n                  <hr />\r\n                  {h.products.map((p, i) => {\r\n                    return (\r\n                      <div key={i}>\r\n                        <h6>Product name: {p.name}</h6>\r\n                        <h6>Product price: ${p.price}</h6>\r\n                        <h6>Purchased date: {moment(p.createdAt).fromNow()}</h6>\r\n                      </div>\r\n                    );\r\n                  })}\r\n                </div>\r\n              );\r\n            })}\r\n          </li>\r\n        </ul>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <Layout\r\n      title=\"Dashboard\"\r\n      description={`G'day ${name}!`}\r\n      className=\"container\"\r\n    >\r\n      <div className=\"row\">\r\n        <div className=\"col-3\">{userLinks()}</div>\r\n        <div className=\"col-9\">\r\n          {userInfo()}\r\n          {purchaseHistory(history)}\r\n        </div>\r\n      </div>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default Dashboard;\r\n","import { API } from \"../config\";\r\n\r\nexport const read = (userId, token) => {\r\n  return fetch(`${API}/user/${userId}`, {\r\n    method: \"GET\",\r\n    headers: {\r\n      Accept: \"application/json\",\r\n      \"Content-Type\": \"application/json\",\r\n      Authorization: `Bearer ${token}`,\r\n    },\r\n  })\r\n    .then((response) => {\r\n      return response.json();\r\n    })\r\n    .catch((err) => console.log(err));\r\n};\r\n\r\nexport const update = (userId, token, user) => {\r\n  return fetch(`${API}/user/${userId}`, {\r\n    method: \"PUT\",\r\n    headers: {\r\n      Accept: \"application/json\",\r\n      \"Content-Type\": \"application/json\",\r\n      Authorization: `Bearer ${token}`,\r\n    },\r\n    body: JSON.stringify({ user }),\r\n  })\r\n    .then((response) => {\r\n      return response.json();\r\n    })\r\n    .catch((err) => console.log(err));\r\n};\r\n\r\nexport const updateUser = (user, next) => {\r\n  if (typeof window !== \"undefined\") {\r\n    if (localStorage.getItem(\"jwt\")) {\r\n      let auth = JSON.parse(localStorage.getItem(\"jwt\"));\r\n      auth.user = user;\r\n      localStorage.setItem(\"jwt\", JSON.stringify(auth));\r\n      next();\r\n    }\r\n  }\r\n};\r\n\r\nexport const getPurchaseHistory = (userId, token) => {\r\n    return fetch(`${API}/orders/by/user/${userId}`, {\r\n      method: \"GET\",\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: `Bearer ${token}`,\r\n      },\r\n    })\r\n      .then((response) => {\r\n        return response.json();\r\n      })\r\n      .catch((err) => console.log(err));\r\n  };\r\n  ","import React from \"react\";\r\nimport Layout from \"../core/Layout\";\r\nimport { isAuthenticated } from \"../auth/index\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nconst AdminDashboard = () => {\r\n  const {\r\n    user: { _id, name, email, role },\r\n  } = isAuthenticated();\r\n\r\n  const adminLinks = () => {\r\n    return (\r\n      <div className=\"card\">\r\n        <h4 className=\"card-header\">\r\n          Admin Links\r\n          <ul className=\"list-group\">\r\n            <li className=\"list-group-item\">\r\n              <Link className=\"nav-link\" to=\"/create/category\">\r\n                Create Category\r\n              </Link>\r\n            </li>\r\n            <li className=\"list-group-item\">\r\n              <Link className=\"nav-link\" to=\"/create/product\">\r\n                Create Product\r\n              </Link>\r\n            </li>\r\n            <li className=\"list-group-item\">\r\n              <Link className=\"nav-link\" to=\"/admin/orders\">\r\n                View Orders\r\n              </Link>\r\n            </li>\r\n            <li className=\"list-group-item\">\r\n              <Link className=\"nav-link\" to=\"/admin/products\">\r\n                Manage Products\r\n              </Link>\r\n            </li>\r\n          </ul>\r\n        </h4>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const adminInfo = () => {\r\n    return (\r\n      <div className=\"card mb-5\">\r\n        <h3 className=\"card-header\">User Information</h3>\r\n        <ul className=\"list-group\">\r\n          <li className=\"list-group-item\">{name}</li>\r\n          <li className=\"list-group-item\">{email}</li>\r\n          <li className=\"list-group-item\">\r\n            {role === 1 ? \"Admin\" : \"Register User\"}\r\n          </li>\r\n        </ul>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <Layout\r\n      title=\"Dashboard\"\r\n      description={`G'day ${name}!`}\r\n      className=\"container\"\r\n    >\r\n      <div className=\"row\">\r\n        <div className=\"col-3\">{adminLinks()}</div>\r\n        <div className=\"col-9\">{adminInfo()}</div>\r\n      </div>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default AdminDashboard;\r\n","import { API } from \"../config\";\r\n\r\nexport const createCategory = (userId, token, category) => {\r\n  return fetch(`${API}/category/create/${userId}`, {\r\n    method: \"POST\",\r\n    headers: {\r\n      Accept: \"application/json\",\r\n      \"Content-Type\": \"application/json\",\r\n      Authorization: `Bearer ${token}`,\r\n    },\r\n    body: JSON.stringify(category),\r\n  })\r\n    .then((response) => {\r\n      return response.json();\r\n    })\r\n    .catch((err) => {\r\n      console.log(err);\r\n    });\r\n};\r\n\r\nexport const createProduct = (userId, token, product) => {\r\n  return fetch(`${API}/product/create/${userId}`, {\r\n    method: \"POST\",\r\n    headers: {\r\n      Accept: \"application/json\",\r\n      Authorization: `Bearer ${token}`,\r\n    },\r\n    body: product,\r\n  })\r\n    .then((response) => {\r\n      return response.json();\r\n    })\r\n    .catch((err) => {\r\n      console.log(err);\r\n    });\r\n};\r\n\r\nexport const getGetCategories = () => {\r\n  return fetch(`${API}/categories`, {\r\n    method: \"GET\",\r\n  })\r\n    .then((response) => {\r\n      return response.json();\r\n    })\r\n    .catch((err) => console.log(err));\r\n};\r\n\r\nexport const listOrders = (userId, token) => {\r\n  return fetch(`${API}/order/list/${userId}`, {\r\n    method: \"GET\",\r\n    headers: {\r\n      Accept: \"application/json\",\r\n      Authorization: `Bearer ${token}`,\r\n    },\r\n  })\r\n    .then((response) => {\r\n      return response.json();\r\n    })\r\n    .catch((err) => console.log(err));\r\n};\r\n\r\nexport const getStatusValues = (userId, token) => {\r\n  return fetch(`${API}/order/status-values/${userId}`, {\r\n    method: \"GET\",\r\n    headers: {\r\n      Accept: \"application/json\",\r\n      Authorization: `Bearer ${token}`,\r\n    },\r\n  })\r\n    .then((response) => {\r\n      return response.json();\r\n    })\r\n    .catch((err) => console.log(err));\r\n};\r\n\r\nexport const updateOrderStatus = (userId, token, orderId, status) => {\r\n  return fetch(`${API}/order/${orderId}/status/${userId}`, {\r\n    method: \"PUT\",\r\n    headers: {\r\n      Accept: \"application/json\",\r\n      \"Content-Type\": \"application/json\",\r\n      Authorization: `Bearer ${token}`,\r\n    },\r\n    body: JSON.stringify({ status, orderId }),\r\n  })\r\n    .then((response) => {\r\n      return response.json();\r\n    })\r\n    .catch((err) => console.log(err));\r\n};\r\n\r\n/*\r\nto perform crud on product\r\nget all products\r\nget a single product\r\nupdate single product\r\ndelete single product\r\n*/\r\n\r\nexport const getProducts = () => {\r\n  return fetch(`${API}/products?limit=undefined`, {\r\n    method: \"GET\",\r\n  })\r\n    .then((response) => {\r\n      return response.json();\r\n    })\r\n    .catch((err) => console.log(err));\r\n};\r\n\r\nexport const deleteProduct = (productId, userId, token) => {\r\n  return fetch(`${API}/product/${productId}/${userId}`, {\r\n    method: \"DELETE\",\r\n    headers: {\r\n      Accept: \"application/json\",\r\n      \"Content-Type\": \"application/json\",\r\n      Authorization: `Bearer ${token}`,\r\n    },\r\n  })\r\n    .then((response) => {\r\n      return response.json();\r\n    })\r\n    .catch((err) => console.log(err));\r\n};\r\n\r\nexport const getProduct = (productId) => {\r\n  return fetch(`${API}/product/${productId}`, {\r\n    method: \"GET\",\r\n  })\r\n    .then((response) => {\r\n      return response.json();\r\n    })\r\n    .catch((err) => console.log(err));\r\n};\r\n\r\nexport const updateProduct = (productId, userId, token, product) => {\r\n  return fetch(`${API}/product/${productId}/${userId}`, {\r\n    method: \"PUT\",\r\n    headers: {\r\n      Accept: \"application/json\",\r\n      Authorization: `Bearer ${token}`,\r\n    },\r\n    body: product,\r\n  })\r\n    .then((response) => {\r\n      return response.json();\r\n    })\r\n    .catch((err) => console.log(err));\r\n};\r\n","import React, { useState } from \"react\";\r\nimport Layout from \"../core/Layout\";\r\nimport { isAuthenticated } from \"../auth/index\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { createCategory } from \"./apiAdmin\";\r\n\r\nconst AddCategory = () => {\r\n  const [name, setName] = useState(\"\");\r\n  const [error, setError] = useState(false);\r\n  const [success, setSuccess] = useState(false);\r\n\r\n  //Destructor user and token from localstorage\r\n  const { user, token } = isAuthenticated();\r\n\r\n  const handleChange = (e) => {\r\n    setError(\"\");\r\n    setName(e.target.value);\r\n  };\r\n  const clickSubmit = (e) => {\r\n    //to not make page reload\r\n    e.preventDefault();\r\n    setError(\"\");\r\n    setSuccess(false);\r\n    //make request to api to create category\r\n    createCategory(user._id, token, { name }).then((data) => {\r\n      if (data.error) {\r\n        setError(true);\r\n      } else {\r\n        setError(\"\");\r\n        setSuccess(true);\r\n      }\r\n    });\r\n  };\r\n\r\n  const newCategoryForm = () => (\r\n    <form onSubmit={clickSubmit}>\r\n      <div className=\"form-group\">\r\n        <label className=\"text-muted\">Name</label>\r\n        <input\r\n          type=\"text\"\r\n          className=\"form-control\"\r\n          onChange={handleChange}\r\n          value={name}\r\n          autoFocus\r\n          required\r\n        />\r\n      </div>\r\n      <button className=\"btn btn-outline-primary\">create category </button>\r\n    </form>\r\n  );\r\n  const showSuccess = () => {\r\n    if (success) {\r\n      return <h3 className=\"text-success\"> {name} is created</h3>;\r\n    }\r\n  };\r\n  const showError = () => {\r\n    if (error) {\r\n      return <h3 className=\"text-danger\"> Category should be unique</h3>;\r\n    }\r\n  };\r\n  const goBack = () => (\r\n    <div className=\"mt-5\">\r\n      <Link to=\"/admin/dashboard\" className=\"text-warning\">\r\n        Back to Dashboard\r\n      </Link>\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <Layout\r\n      title=\"Add a new Category\"\r\n      description={`G'day ${user.name}, ready to add a new category`}\r\n    >\r\n      <div className=\"row\">\r\n        <div className=\"col-md-8 offset-md-2\">\r\n          {showSuccess()}\r\n          {showError()}\r\n          {newCategoryForm()}\r\n          {goBack()}\r\n        </div>\r\n      </div>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default AddCategory;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport Layout from \"../core/Layout\";\r\nimport { isAuthenticated } from \"../auth/index\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { createProduct, getGetCategories } from \"./apiAdmin\";\r\n\r\nconst AddProduct = () => {\r\n  const [values, setValues] = useState({\r\n    name: \"\",\r\n    description: \"\",\r\n    price: \"\",\r\n    categories: [],\r\n    category: \"\",\r\n    shipping: \"\",\r\n    quantity: \"\",\r\n    photo: \"\",\r\n    loading: false,\r\n    error: \"\",\r\n    createdProduct: \"\",\r\n    redirectToProfile: false,\r\n    formData: \"\",\r\n  });\r\n  const { user, token } = isAuthenticated();\r\n\r\n  const {\r\n    name,\r\n    description,\r\n    price,\r\n    categories,\r\n    category,\r\n    shipping,\r\n    quantity,\r\n    loading,\r\n    error,\r\n    createdProduct,\r\n    redirectToProfile,\r\n    formData,\r\n  } = values;\r\n\r\n  //load categories and set formdata\r\n  const init = () => {\r\n    getGetCategories().then((data) => {\r\n      if (data.error) {\r\n        setValues({ ...values, error: data.error });\r\n      } else {\r\n        setValues({ ...values, categories: data, formData: new FormData() });\r\n      }\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    init();\r\n  }, []);\r\n\r\n  const handleChange = (name) => (event) => {\r\n    console.log(\"inside handleChange \");\r\n    const value = name === \"photo\" ? event.target.files[0] : event.target.value;\r\n    formData.set(name, value);\r\n    setValues({ ...values, [name]: value });\r\n    console.log(\"values \", values);\r\n  };\r\n\r\n  const clickSubmit = (event) => {\r\n    event.preventDefault();\r\n    setValues({ ...values, error: \"\", loading: true });\r\n    console.log(\"formData\", formData);\r\n    createProduct(user._id, token, formData).then((data) => {\r\n      console.log(\"data \", data);\r\n      if (data.error) {\r\n        setValues({ ...values, error: data.error });\r\n      } else {\r\n        setValues({\r\n          ...values,\r\n          name: \"\",\r\n          description: \"\",\r\n          photo: \"\",\r\n          price: \"\",\r\n          quantity: \"\",\r\n          loading: false,\r\n          createdProduct: data.name,\r\n        });\r\n      }\r\n    });\r\n  };\r\n\r\n  const newPostForm = () => (\r\n    <form className=\"mb-3\" onSubmit={clickSubmit}>\r\n      <h4>Post Photo</h4>\r\n      <div className=\"form-group\">\r\n        <label className=\"btn btn-secondary\">\r\n          <input\r\n            onChange={handleChange(\"photo\")}\r\n            type=\"file\"\r\n            name=\"photo\"\r\n            accept=\"image/*\"\r\n          />\r\n        </label>\r\n      </div>\r\n      <div className=\"form-group\">\r\n        <label className=\"text-muted\">Name</label>\r\n        <input\r\n          onChange={handleChange(\"name\")}\r\n          type=\"text\"\r\n          className=\"form-control\"\r\n          value={name}\r\n        />\r\n      </div>\r\n      <div className=\"form-group\">\r\n        <label className=\"text-muted\">Description</label>\r\n        <textarea\r\n          onChange={handleChange(\"description\")}\r\n          className=\"form-control\"\r\n          value={description}\r\n        />\r\n      </div>\r\n      <div className=\"form-group\">\r\n        <label className=\"text-muted\">Price</label>\r\n        <input\r\n          onChange={handleChange(\"price\")}\r\n          type=\"number\"\r\n          className=\"form-control\"\r\n          value={price}\r\n        />\r\n      </div>\r\n      <div className=\"form-group\">\r\n        <label className=\"text-muted\">Category</label>\r\n        <select onChange={handleChange(\"category\")} className=\"form-control\">\r\n          <option>Please select</option>\r\n          {categories &&\r\n            categories.map((c, i) => (\r\n              <option key={i} value={c._id}>\r\n                {c.name}\r\n              </option>\r\n            ))}\r\n        </select>\r\n      </div>\r\n      <div className=\"form-group\">\r\n        <label className=\"text-muted\">Quantity</label>\r\n        <input\r\n          onChange={handleChange(\"quantity\")}\r\n          type=\"number\"\r\n          className=\"form-control\"\r\n          value={quantity}\r\n        />\r\n      </div>\r\n      <div className=\"form-group\">\r\n        <label className=\"text-muted\">Shipping</label>\r\n        <select onChange={handleChange(\"shipping\")} className=\"form-control\">\r\n          <option>Please select</option>\r\n          <option value=\"0\">No</option>\r\n          <option value=\"1\">Yes</option>\r\n        </select>\r\n      </div>\r\n      <button className=\"btn btn-outline-primary\">Create Product</button>\r\n    </form>\r\n  );\r\n  const showError = () => (\r\n    <div\r\n      className=\"alert alert-danger\"\r\n      style={{ display: error ? \"\" : \"none\" }}\r\n    >\r\n      {error}\r\n    </div>\r\n  );\r\n  const showSuccess = () => (\r\n    <div\r\n      className=\"alert alert-info\"\r\n      style={{ display: createdProduct ? \"\" : \"none\" }}\r\n    >\r\n      <h2>{`${createdProduct}`}is created</h2>\r\n    </div>\r\n  );\r\n  const showLoading = () =>\r\n    loading && (\r\n      <div className=\"alert alert-success\">\r\n        <h2>Loading...</h2>\r\n      </div>\r\n    );\r\n  return (\r\n    <Layout\r\n      title=\"Add a new Product\"\r\n      description={`G'day ${user.name}, ready to add a new product`}\r\n    >\r\n      <div className=\"row\">\r\n        <div className=\"col-md-8 offset-md-2\">\r\n          {showLoading()}\r\n          {showSuccess()}\r\n          {showError()}\r\n          {newPostForm()}\r\n        </div>\r\n      </div>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default AddProduct;\r\n","import React, { useState, useEffect } from \"react\";\r\n\r\nconst Checkbox = ({ categories, handleFilters }) => {\r\n  const [checked, setChecked] = useState([]);\r\n\r\n  const handleToggle = (c) => () => {\r\n    //return the first index or -1\r\n    const currentCategoryId = checked.indexOf(c);\r\n    const newCheckedCategoryId = [...checked];\r\n    //if currently checked was not already in checked state > push\r\n    // else pull/take off\r\n    if (currentCategoryId === -1) {\r\n      newCheckedCategoryId.push(c);\r\n    } else {\r\n      newCheckedCategoryId.splice(currentCategoryId, 1);\r\n    }\r\n    console.log(newCheckedCategoryId);\r\n    setChecked(newCheckedCategoryId);\r\n    handleFilters(newCheckedCategoryId);\r\n  };\r\n\r\n  return categories.map((c, i) => (\r\n    <li key={i} className=\"list-unstyled\">\r\n      <input\r\n        onChange={handleToggle(c._id)}\r\n        value={checked.indexOf(c._id === -1)}\r\n        type=\"checkbox\"\r\n        className=\"form-check-input\"\r\n      />\r\n      <label className=\"form-check-label\">{c.name}</label>\r\n    </li>\r\n  ));\r\n};\r\n\r\nexport default Checkbox;\r\n","import React, { useState, useEffect, Fragment } from \"react\";\r\n\r\nconst RadioBox = ({ prices, handleFilters }) => {\r\n  const [value, setValue] = useState(0);\r\n\r\n  const handleChange = (event) => {\r\n    handleFilters(event.target.value);\r\n    setValue(event.target.value);\r\n  };\r\n\r\n  return prices.map((p, i) => (\r\n    <div key={i}>\r\n      <input\r\n        onChange={handleChange}\r\n        name={p}\r\n        value={`${p._id}`}\r\n        type=\"radio\"\r\n        className=\"mr-2 ml-4\"\r\n      />\r\n      <label className=\"form-check-label\">{p.name}</label>\r\n    </div>\r\n  ));\r\n};\r\n\r\nexport default RadioBox;\r\n","export const prices = [\r\n  {\r\n    _id: 0,\r\n    name: \"Any\",\r\n    array: [],\r\n  },\r\n  {\r\n    _id: 1,\r\n    name: \"$0 to $9\",\r\n    array: [0, 9],\r\n  },\r\n  {\r\n    _id: 2,\r\n    name: \"$10 to $19\",\r\n    array: [10, 19],\r\n  },\r\n  {\r\n    _id: 3,\r\n    name: \"$20 to $29\",\r\n    array: [20, 29],\r\n  },\r\n  {\r\n    _id: 4,\r\n    name: \"$30 to $39\",\r\n    array: [30, 39],\r\n  },\r\n  {\r\n    _id: 5,\r\n    name: \"More than $40\",\r\n    array: [40, 99],\r\n  },\r\n];\r\n","import React, { useState, useEffect } from \"react\";\r\nimport Layout from \"./Layout\";\r\nimport Card from \"./Card\";\r\nimport { getCategories, getFilteredProducts } from \"./apiCore\";\r\nimport Checkbox from \"./Checkbox\";\r\nimport RadioBox from \"./RadioBox\";\r\nimport { prices } from \"./fixedPrices\";\r\n\r\nconst Shop = () => {\r\n  const [myFilters, setMyFilters] = useState({\r\n    filters: { catergory: [], price: [] },\r\n  });\r\n  const [categories, setCategories] = useState([]);\r\n  const [error, setError] = useState(false);\r\n  const [limit, setLimit] = useState(6);\r\n  const [skip, setSkip] = useState(0);\r\n  const [size, setSize] = useState(0);\r\n  const [filteredResults, setFilteredResults] = useState(0);\r\n\r\n  const init = () => {\r\n    getCategories().then((data) => {\r\n      if (data.error) {\r\n        setError(true);\r\n      } else {\r\n        setCategories(data);\r\n      }\r\n    });\r\n  };\r\n\r\n  const loadFilteredResults = (newFilters) => {\r\n    getFilteredProducts(skip, limit, newFilters).then((data) => {\r\n      if (data.error) {\r\n        setError(data.error);\r\n      } else {\r\n        setFilteredResults(data.data);\r\n        setSize(data.size);\r\n        setSkip(0);\r\n      }\r\n    });\r\n  };\r\n\r\n  const loadMore = () => {\r\n    let toSkip = skip + limit;\r\n    getFilteredProducts(toSkip, limit, myFilters.filters).then((data) => {\r\n      if (data.error) {\r\n        setError(data.error);\r\n      } else {\r\n        setFilteredResults([...filteredResults, ...data.data]);\r\n        setSize(toSkip);\r\n        setSkip(0);\r\n      }\r\n    });\r\n  };\r\n\r\n  const loadMoreButton = () => {\r\n    console.log(\"size \", size);\r\n    return (\r\n      size > 0 &&\r\n      size >= limit && (\r\n        <button onClick={loadMore} className=\"btn btn-warning mb-5\">\r\n          Load more\r\n        </button>\r\n      )\r\n    );\r\n  };\r\n\r\n  useEffect(() => {\r\n    init();\r\n    loadFilteredResults(skip, limit, myFilters.filters);\r\n  }, []);\r\n\r\n  const handleFilters = (filters, filterBy) => {\r\n    const newFilters = { ...myFilters };\r\n    newFilters.filters[filterBy] = filters;\r\n\r\n    if (filterBy == \"price\") {\r\n      let priceValues = handlePrice(filters);\r\n      newFilters.filters[filterBy] = priceValues;\r\n    }\r\n    loadFilteredResults(myFilters.filters);\r\n    setMyFilters(newFilters);\r\n  };\r\n  const handlePrice = (value) => {\r\n    const data = prices;\r\n    let array = [];\r\n    for (let key in data) {\r\n      if (data[key]._id == parseInt(value)) {\r\n        array = data[key].array;\r\n      }\r\n    }\r\n    return array;\r\n  };\r\n\r\n  return (\r\n    <Layout\r\n      title=\"Shop page\"\r\n      description=\"Search and find books of your choice\"\r\n      className=\"container-fluid\"\r\n    >\r\n      <div className=\"row\">\r\n        <div className=\"col-4\">\r\n          <h4>Filter by categories</h4>\r\n          <ul>\r\n            <Checkbox\r\n              categories={categories}\r\n              handleFilters={(filters) => handleFilters(filters, \"category\")}\r\n            />\r\n          </ul>\r\n          <h4>Filter by price range</h4>\r\n          <div>\r\n            <RadioBox\r\n              prices={prices}\r\n              handleFilters={(filters) => handleFilters(filters, \"price\")}\r\n            />\r\n          </div>\r\n        </div>\r\n        <div className=\"col-8\">\r\n          <h2 className=\"mb-4\">Products</h2>\r\n          <div className=\"row\">\r\n            {filteredResults &&\r\n              filteredResults.map((product, i) => (\r\n                <div className=\"col-4 mb-3\">\r\n                  <Card key={i} product={product} />\r\n                </div>\r\n              ))}\r\n          </div>\r\n          <hr />\r\n          {loadMoreButton()}\r\n        </div>\r\n      </div>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default Shop;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport Layout from \"./Layout\";\r\nimport { read, listRelated } from \"./apiCore\";\r\nimport  Card from \"./Card\";\r\n\r\nconst Product = (props) => {\r\n  const [product, setProduct] = useState({});\r\n  const [related, setRelated] = useState([]);\r\n  const [error, setError] = useState(false);\r\n\r\n  const loadSingleProduct = (productId) => {\r\n    read(productId).then((data) => {\r\n      if (data.error) {\r\n        setError(data.error);\r\n      } else {\r\n        setProduct(data);\r\n        //fetch related product\r\n        listRelated(data._id).then((data) => {\r\n          if (data.error) {\r\n            setError(data.error);\r\n          } else {\r\n            setRelated(data);\r\n          }\r\n        });\r\n      }\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    const productId = props.match.params.productId;\r\n    loadSingleProduct(productId);\r\n  }, [props]);\r\n\r\n  return (\r\n    <Layout\r\n      title={product && product.name}\r\n      description={\r\n        product && product.description && product.description.substring(0, 100)\r\n      }\r\n      className=\"container-fluid\"\r\n    >\r\n      <h2 className=\"mb-4\">Single Product</h2>\r\n      <div className=\"row\">\r\n        <div className=\"col-8\">\r\n          {product && product.description && (\r\n            <Card product={product} showViewProductButton={false} />\r\n          )}\r\n        </div>\r\n        <div className=\"col-4\">\r\n          <h4>Related Products</h4>\r\n          {related.map((p, i) => (\r\n            <div className=\"mb-3\">\r\n              <Card key={i} product={p} />\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default Product;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport Layout from \"./Layout\";\r\nimport {\r\n  getProducts,\r\n  getBraintreeClientToken,\r\n  processPayment,\r\n  createOrder,\r\n} from \"./apiCore\";\r\nimport { emptyCart } from \"./cartHealpers\";\r\nimport Card from \"./Card\";\r\nimport { isAuthenticated } from \"../auth\";\r\nimport { Link } from \"react-router-dom\";\r\nimport DropIn from \"braintree-web-drop-in-react\";\r\n\r\nconst Checkout = ({ products }) => {\r\n  const [data, setData] = useState({\r\n    loading: false,\r\n    success: false,\r\n    clientToken: null,\r\n    error: \"\",\r\n    instance: {},\r\n    address: \"\",\r\n  });\r\n\r\n  const userId = isAuthenticated() && isAuthenticated().user._id;\r\n  const token = isAuthenticated() && isAuthenticated().token;\r\n\r\n  const getToken = (userId, token) => {\r\n    getBraintreeClientToken(userId, token).then((data) => {\r\n      if (data.error) {\r\n        setData({ ...data, error: data.error });\r\n      } else {\r\n        setData({ clientToken: data.clientToken });\r\n      }\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    getToken(userId, token);\r\n  }, []);\r\n\r\n  const getTotal = () => {\r\n    return products.reduce((currentValue, nextValue) => {\r\n      return currentValue + nextValue.count * nextValue.price;\r\n    }, 0);\r\n  };\r\n\r\n  const showCheckout = () => {\r\n    return isAuthenticated() ? (\r\n      <div>{showDropIn()}</div>\r\n    ) : (\r\n      <button className=\"btn btn-success\">\r\n        <Link to=\"/signin\">Sign in to chekcout</Link>\r\n      </button>\r\n    );\r\n  };\r\n\r\n  let deliveryAddress = data.address;\r\n\r\n  const handleAddress = (event) => {\r\n    setData({ ...data, address: event.target.value });\r\n  };\r\n\r\n  const buy = () => {\r\n    setData({ loading: true });\r\n    //send the nonce to server\r\n    //nonce = data.instance.requestPaymentMethod\r\n    let nonce;\r\n    let getNonce = data.instance\r\n      .requestPaymentMethod()\r\n      .then((data) => {\r\n        nonce = data.nonce;\r\n        // once you have nonce (card type, card number) send nonce as 'payementMethodNonce'\r\n        //and also total to be charged\r\n        // console.log(\r\n        //   \"send nonce and total to process : \",\r\n        //   nonce,\r\n        //   getTotal(products)\r\n        // );\r\n        const paymentData = {\r\n          paymentMethodNonce: nonce,\r\n          amount: getTotal(products),\r\n        };\r\n        processPayment(userId, token, paymentData)\r\n          .then((response) => {\r\n            //empty cart\r\n            //create order\r\n\r\n            const createOrderData = {\r\n              products: products,\r\n              transaction_id: response.transaction.id,\r\n              amount: response.transaction.amount,\r\n              address: deliveryAddress,\r\n            };\r\n\r\n            createOrder(userId, token, createOrderData);\r\n            setData({ ...data, success: response.success });\r\n            emptyCart(() => {\r\n              window.location.reload();\r\n              console.log(\"payment success and empty cart\");\r\n              setData({ loading: false, success: true });\r\n            });\r\n          })\r\n          .catch((error) => {\r\n            console.log(error);\r\n            setData({ loading: false });\r\n          });\r\n      })\r\n      .catch((error) => {\r\n        setData({ ...data, error: error.message });\r\n      });\r\n  };\r\n\r\n  const showDropIn = () => (\r\n    <div onBlur={() => setData({ ...data, error: \"\" })}>\r\n      {data.clientToken !== null && products.length > 0 ? (\r\n        <div>\r\n          <div className=\"form-group mb-3\">\r\n            <label className=\"text-muted\">Delivery address: </label>\r\n            <textarea\r\n              onChange={handleAddress}\r\n              className=\"form-control\"\r\n              value={data.address}\r\n              placeholder=\"Type your delevery address here ... \"\r\n            />\r\n          </div>\r\n          <DropIn\r\n            options={{\r\n              authorization: data.clientToken,\r\n              paypal: {\r\n                flow: \"vault\",\r\n              },\r\n            }}\r\n            onInstance={(instance) => (data.instance = instance)}\r\n          />\r\n          <button onClick={buy} className=\"btn btn-success btn-block\">\r\n            Pay\r\n          </button>\r\n        </div>\r\n      ) : null}\r\n    </div>\r\n  );\r\n\r\n  const showError = (error) => (\r\n    <div\r\n      className=\"alert alert-danger\"\r\n      style={{ display: error ? \"\" : \"none\" }}\r\n    >\r\n      {error}\r\n    </div>\r\n  );\r\n  const showSuccess = (success) => (\r\n    <div\r\n      className=\"alert alert-info\"\r\n      style={{ display: success ? \"\" : \"none\" }}\r\n    >\r\n      Thanks! Your payment was succeful\r\n    </div>\r\n  );\r\n\r\n  const showLoading = (loading) => loading && <h2>Loading...</h2>;\r\n\r\n  return (\r\n    <div>\r\n      <h2>Total: ${getTotal()}</h2>\r\n      {showLoading(data.loading)}\r\n      {showSuccess(data.success)}\r\n      {showError(data.error)}\r\n      {showCheckout()}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Checkout;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport Layout from \"./Layout\";\r\nimport { getCart } from \"./cartHealpers\";\r\nimport Card from \"./Card\";\r\nimport Checkout from \"./Checkout\";\r\n\r\nconst Cart = () => {\r\n  const [items, setItems] = useState([]);\r\n  const [run, setRun] = useState(false);\r\n\r\n  useEffect(() => {\r\n    setItems(getCart());\r\n  }, [run]);\r\n\r\n  const showItems = (items) => {\r\n    return (\r\n      <div>\r\n        <h2>Your cart has {`${items.length}`} items</h2>\r\n        <hr />\r\n        {items.map((product, i) => (\r\n          <Card\r\n            key={i}\r\n            product={product}\r\n            showAddToCartButton={false}\r\n            cartUpdate={true}\r\n            showRemoveProductButton={true}\r\n            setRun={setRun}\r\n            run={run}\r\n          />\r\n        ))}\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const noItemsMessage = () => (\r\n    <h2>\r\n      Your cart is empty. <br /> <Link to=\"/shop\">Continue shopping</Link>\r\n    </h2>\r\n  );\r\n\r\n  return (\r\n    <Layout\r\n      title=\"Shopping Cart\"\r\n      description=\"Manage your cart items. Add remove checkout or continue shopping.\"\r\n      className=\"container-fluid\"\r\n    >\r\n      <div className=\"row\">\r\n        <div className=\"col-6\">\r\n          {items.length > 0 ? showItems(items) : noItemsMessage()}\r\n        </div>\r\n\r\n        <div className=\"col-6\">\r\n          <h2 className=\"mb-4\">Your cart summary</h2>\r\n          <hr />\r\n          <Checkout products={items} setRun={setRun} run={run} />\r\n        </div>\r\n      </div>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default Cart;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport Layout from \"../core/Layout\";\r\nimport { isAuthenticated } from \"../auth/index\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { listOrders, getStatusValues, updateOrderStatus } from \"./apiAdmin\";\r\nimport moment from \"moment\";\r\n\r\nconst Orders = () => {\r\n  const [orders, setOrders] = useState([]);\r\n  const [statusValues, setStatusValues] = useState([]);\r\n\r\n  const { user, token } = isAuthenticated();\r\n\r\n  const loadOrders = () => {\r\n    listOrders(user._id, token).then((data) => {\r\n      if (data.error) {\r\n        console.log(data.error);\r\n      } else {\r\n        setOrders(data);\r\n      }\r\n    });\r\n  };\r\n\r\n  const loadStatusValues = () => {\r\n    getStatusValues(user._id, token).then((data) => {\r\n      if (data.error) {\r\n        console.log(data.error);\r\n      } else {\r\n        setStatusValues(data);\r\n      }\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    loadOrders();\r\n    loadStatusValues();\r\n  }, []);\r\n\r\n  const showOrdersLength = () => {\r\n    if (orders.length > 0) {\r\n      return (\r\n        <h1 className=\"text-danger display-2\">Total orders: {orders.length}</h1>\r\n      );\r\n    } else {\r\n      return <h1 className=\"text-danger\">No orders </h1>;\r\n    }\r\n  };\r\n\r\n  const showInput = (key, value) => (\r\n    <div className=\"input-group mb-2 mr-sm-2\">\r\n      <div className=\"input-group-prepend\">\r\n        <div className=\"input-group-text\">{key}</div>\r\n      </div>\r\n      <input type=\"text\" value={value} className=\"form-control\" readOnly />\r\n    </div>\r\n  );\r\n\r\n  const handleStatusChange = (e, orderId) => {\r\n    updateOrderStatus(user._id, token, orderId, e.target.value).then((data) => {\r\n      if (data.error) {\r\n        console.log(\"Status update failed\");\r\n      } else {\r\n        loadOrders();\r\n      }\r\n    });\r\n  };\r\n\r\n  const showStatus = (o) => (\r\n    <div className=\"form-group\">\r\n      <h3 className=\"mark mb-4\">Status:{o.status}</h3>\r\n      <select\r\n        className=\"form-control\"\r\n        onChange={(e) => handleStatusChange(e, o._id)}\r\n      >\r\n        <option>Update Status</option>\r\n        {statusValues.map((status, index) => (\r\n          <option key={index} value={status}>\r\n            {status}\r\n          </option>\r\n        ))}\r\n      </select>\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <Layout\r\n      title=\"Orders\"\r\n      description={`G'day ${user.name}, you can manage all the orders here`}\r\n    >\r\n      <div className=\"row\">\r\n        <div className=\"col-md-8 offset-md-2\">\r\n          {showOrdersLength()}\r\n          {orders.map((o, oIndex) => {\r\n            return (\r\n              <div\r\n                className=\"mt-5\"\r\n                key={oIndex}\r\n                style={{ borderBottom: \"5px solid indigo\" }}\r\n              >\r\n                <h2 className=\"mb-5\">\r\n                  <span className=\"bg-primary\">Order ID: {o._id}</span>\r\n                </h2>\r\n                <ul className=\"list-group mb-2\">\r\n                  <li className=\"list-group-item\">{showStatus(o)}</li>\r\n                  <li className=\"list-group-item\">\r\n                    Transaction ID : {o.transaction_id}\r\n                  </li>\r\n                  <li className=\"list-group-item\">Amount : ${o.amount}</li>\r\n                  <li className=\"list-group-item\">Ordered by: {o.user.name}</li>\r\n                  <li className=\"list-group-item\">\r\n                    Ordered on : {moment(o.createdAt).fromNow()}\r\n                  </li>\r\n                  <li className=\"list-group-item\">\r\n                    Delivery address: {o.address}\r\n                  </li>\r\n                </ul>\r\n                <h3 className=\"mt-4 mb-4 font-italic\">\r\n                  Total products in the order: {o.products.length}\r\n                </h3>\r\n\r\n                {o.products.map((p, pIndex) => (\r\n                  <div\r\n                    className=\"mb-4\"\r\n                    key={pIndex}\r\n                    style={{ padding: \"20px\", border: \"1px solid indigo\" }}\r\n                  >\r\n                    {showInput(\"Product name\", p.name)}\r\n                    {showInput(\"Product price\", p.price)}\r\n                    {showInput(\"Product total\", p.count)}\r\n                    {showInput(\"Product Id\", p._id)}\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n      </div>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default Orders;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport Layout from \"../core/Layout\";\r\nimport { isAuthenticated } from \"../auth/index\";\r\nimport { Link, Redirect } from \"react-router-dom\";\r\nimport { read, update, updateUser } from \"./apiUser\";\r\n\r\nconst Profile = ({ match }) => {\r\n  const [values, setValues] = useState({\r\n    name: \"\",\r\n    email: \"\",\r\n    password: \"\",\r\n    error: false,\r\n    success: false,\r\n  });\r\n\r\n  const { name, email, password, error, success } = values;\r\n\r\n  const { token } = isAuthenticated();\r\n  const init = (userId) => {\r\n    read(userId, token).then((data) => {\r\n      if (data.error) {\r\n        setValues({ ...values, error: true });\r\n      } else {\r\n        setValues({\r\n          ...values,\r\n          name: data.name,\r\n          email: data.email,\r\n        });\r\n      }\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    init(match.params.userId);\r\n  }, []);\r\n\r\n  const handleChange = (name) => (e) => {\r\n    setValues({ ...values, error: false, [name]: e.target.value });\r\n  };\r\n  const clickSubmit = (e) => {\r\n      console.log('name, email, password ', name, email, password);\r\n    e.preventDefault();\r\n    update(match.params.userId, token, { name, email, password }).then(\r\n      (data) => {\r\n        if (data.error) {\r\n          console.log(data.error);\r\n        } else {\r\n          updateUser(data, () => {\r\n            setValues({\r\n              ...values,\r\n              name: data.name,\r\n              email: data.email,\r\n              success: true,\r\n            });\r\n          });\r\n        }\r\n      }\r\n    );\r\n  };\r\n\r\n  const redirectUser = (success) => {\r\n    if (success) {\r\n      return <Redirect to=\"/cart\" />;\r\n    }\r\n  };\r\n\r\n  const profileUpdate = (name, email, password) => (\r\n    <form>\r\n      <div className=\"form-group\">\r\n        <label className=\"text-muted\">Name</label>\r\n        <input\r\n          type=\"text\"\r\n          onChange={handleChange(\"name\")}\r\n          className=\"form-control\"\r\n          value={name}\r\n        />\r\n      </div>\r\n      <div className=\"form-group\">\r\n        <label className=\"text-muted\">Email</label>\r\n        <input\r\n          type=\"email\"\r\n          onChange={handleChange(\"email\")}\r\n          className=\"form-control\"\r\n          value={email}\r\n        />\r\n      </div>\r\n      <div className=\"form-group\">\r\n        <label className=\"text-muted\">Password</label>\r\n        <input\r\n          type=\"password\"\r\n          onChange={handleChange(\"password\")}\r\n          className=\"form-control\"\r\n          value={password}\r\n        />\r\n      </div>\r\n      <button onClick={clickSubmit} className=\"btn btn-primary\">\r\n        Submit\r\n      </button>\r\n    </form>\r\n  );\r\n  return (\r\n    <Layout\r\n      title=\"Profile\"\r\n      description=\"Update profile\"\r\n      className=\"container-fluid\"\r\n    >\r\n      <h2 className=\"mb-4\">Profile update</h2>\r\n      {profileUpdate(name, email, password)}\r\n      {redirectUser(success)}\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default Profile;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport Layout from \"../core/Layout\";\r\nimport { isAuthenticated } from \"../auth/index\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { getProducts, deleteProduct } from \"./apiAdmin\";\r\n\r\nconst ManageProducts = () => {\r\n  const [products, setProducts] = useState([]);\r\n\r\n  const { user, token } = isAuthenticated();\r\n\r\n  const loadProducts = () => {\r\n    getProducts().then((data) => {\r\n      if (data.error) {\r\n        console.log(data.error);\r\n      } else {\r\n        setProducts(data);\r\n      }\r\n    });\r\n  };\r\n\r\n  const destroy = (productId) => {\r\n    deleteProduct(productId, user._id, token).then((data) => {\r\n      if (data.error) {\r\n        console.log(data.error);\r\n      } else {\r\n        loadProducts();\r\n      }\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    loadProducts();\r\n  }, []);\r\n\r\n  return (\r\n    <Layout\r\n      title=\"Manage Products\"\r\n      description=\"Perform CRUD on Products\"\r\n      className=\"container-fluid\"\r\n    >\r\n      <div className=\"row\">\r\n        <div className=\"col-12\">\r\n          <h2 className=\"text-center\">Total {products.length} products</h2>\r\n          <hr />\r\n          <ul className=\"list-group\">\r\n            {products.map((p, i) => (\r\n              <li\r\n                key={i}\r\n                className=\"list-group-item d-flex justify-content-between align-items-center\"\r\n              >\r\n                <strong>{p.name}</strong>\r\n                <Link to={`/admin/product/update/${p._id}`}>\r\n                  <span className=\"badge badge-warning badge-pill\">Update</span>\r\n                </Link>\r\n                <span\r\n                  onClick={() => destroy(p._id)}\r\n                  className=\"badge badge-danger badge-pill\"\r\n                >\r\n                  Delete\r\n                </span>\r\n              </li>\r\n            ))}\r\n          </ul>\r\n          <br />\r\n        </div>\r\n      </div>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default ManageProducts;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport Layout from \"../core/Layout\";\r\nimport { isAuthenticated } from \"../auth/index\";\r\nimport { Link, Redirect } from \"react-router-dom\";\r\nimport { getProduct, getGetCategories, updateProduct } from \"./apiAdmin\";\r\n\r\nconst UpdateProduct = ({ match }) => {\r\n  const [values, setValues] = useState({\r\n    name: \"\",\r\n    description: \"\",\r\n    price: \"\",\r\n    categories: [],\r\n    category: \"\",\r\n    shipping: \"\",\r\n    quantity: \"\",\r\n    photo: \"\",\r\n    loading: false,\r\n    error: \"\",\r\n    createdProduct: \"\",\r\n    redirectToProfile: false,\r\n    formData: \"\",\r\n  });\r\n  const { user, token } = isAuthenticated();\r\n\r\n  const {\r\n    name,\r\n    description,\r\n    price,\r\n    categories,\r\n    category,\r\n    shipping,\r\n    quantity,\r\n    loading,\r\n    error,\r\n    createdProduct,\r\n    redirectToProfile,\r\n    formData,\r\n  } = values;\r\n\r\n  const init = (productId) => {\r\n    getProduct(productId).then((data) => {\r\n      if (data.error) {\r\n        setValues({ ...values, error: data.error });\r\n      } else {\r\n        //populate the state\r\n        setValues({\r\n          ...values,\r\n          name: data.name,\r\n          description: data.description,\r\n          price: data.price,\r\n          category: data.category._id,\r\n          shipping: data.shipping,\r\n          quantity: data.quantity,\r\n          formData: new FormData(),\r\n        });\r\n        //load categories\r\n        initCategories();\r\n      }\r\n    });\r\n  };\r\n\r\n  //load categories and set formdata\r\n  const initCategories = () => {\r\n    getGetCategories().then((data) => {\r\n      if (data.error) {\r\n        setValues({ ...values, error: data.error });\r\n      } else {\r\n        setValues({ categories: data, formData: new FormData() });\r\n      }\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    init(match.params.productId);\r\n  }, []);\r\n\r\n  const handleChange = (name) => (event) => {\r\n    console.log(\"inside handleChange \");\r\n    const value = name === \"photo\" ? event.target.files[0] : event.target.value;\r\n    formData.set(name, value);\r\n    setValues({ ...values, [name]: value });\r\n    console.log(\"values \", values);\r\n  };\r\n\r\n  const clickSubmit = (event) => {\r\n    event.preventDefault();\r\n    setValues({ ...values, error: \"\", loading: true });\r\n    console.log(\"formData\", formData);\r\n    updateProduct(match.params.productId, user._id, token, formData).then(\r\n      (data) => {\r\n        console.log(\"data \", data);\r\n        if (data.error) {\r\n          setValues({ ...values, error: data.error });\r\n        } else {\r\n          setValues({\r\n            ...values,\r\n            name: \"\",\r\n            description: \"\",\r\n            photo: \"\",\r\n            price: \"\",\r\n            quantity: \"\",\r\n            loading: false,\r\n            redirectToProfile: true,\r\n            error: false,\r\n            createdProduct: data.name,\r\n          });\r\n        }\r\n      }\r\n    );\r\n  };\r\n\r\n  const newPostForm = () => (\r\n    <form className=\"mb-3\" onSubmit={clickSubmit}>\r\n      <h4>Post Photo</h4>\r\n      <div className=\"form-group\">\r\n        <label className=\"btn btn-secondary\">\r\n          <input\r\n            onChange={handleChange(\"photo\")}\r\n            type=\"file\"\r\n            name=\"photo\"\r\n            accept=\"image/*\"\r\n          />\r\n        </label>\r\n      </div>\r\n      <div className=\"form-group\">\r\n        <label className=\"text-muted\">Name</label>\r\n        <input\r\n          onChange={handleChange(\"name\")}\r\n          type=\"text\"\r\n          className=\"form-control\"\r\n          value={name}\r\n        />\r\n      </div>\r\n      <div className=\"form-group\">\r\n        <label className=\"text-muted\">Description</label>\r\n        <textarea\r\n          onChange={handleChange(\"description\")}\r\n          className=\"form-control\"\r\n          value={description}\r\n        />\r\n      </div>\r\n      <div className=\"form-group\">\r\n        <label className=\"text-muted\">Price</label>\r\n        <input\r\n          onChange={handleChange(\"price\")}\r\n          type=\"number\"\r\n          className=\"form-control\"\r\n          value={price}\r\n        />\r\n      </div>\r\n      <div className=\"form-group\">\r\n        <label className=\"text-muted\">Category</label>\r\n        <select onChange={handleChange(\"category\")} className=\"form-control\">\r\n          <option>Please select</option>\r\n          {categories &&\r\n            categories.map((c, i) => (\r\n              <option key={i} value={c._id}>\r\n                {c.name}\r\n              </option>\r\n            ))}\r\n        </select>\r\n      </div>\r\n      <div className=\"form-group\">\r\n        <label className=\"text-muted\">Quantity</label>\r\n        <input\r\n          onChange={handleChange(\"quantity\")}\r\n          type=\"number\"\r\n          className=\"form-control\"\r\n          value={quantity}\r\n        />\r\n      </div>\r\n      <div className=\"form-group\">\r\n        <label className=\"text-muted\">Shipping</label>\r\n        <select onChange={handleChange(\"shipping\")} className=\"form-control\">\r\n          <option>Please select</option>\r\n          <option value=\"0\">No</option>\r\n          <option value=\"1\">Yes</option>\r\n        </select>\r\n      </div>\r\n      <button className=\"btn btn-outline-primary\">Update Product</button>\r\n    </form>\r\n  );\r\n  const showError = () => (\r\n    <div\r\n      className=\"alert alert-danger\"\r\n      style={{ display: error ? \"\" : \"none\" }}\r\n    >\r\n      {error}\r\n    </div>\r\n  );\r\n  const showSuccess = () => (\r\n    <div\r\n      className=\"alert alert-info\"\r\n      style={{ display: createdProduct ? \"\" : \"none\" }}\r\n    >\r\n      <h2>{`${createdProduct}`}is updated</h2>\r\n    </div>\r\n  );\r\n  const showLoading = () =>\r\n    loading && (\r\n      <div className=\"alert alert-success\">\r\n        <h2>Loading...</h2>\r\n      </div>\r\n    );\r\n\r\n  const redirectUser = () => {\r\n    if (redirectToProfile) {\r\n      if (!error) {\r\n        return <Redirect to=\"/\" />;\r\n      }\r\n    }\r\n  };\r\n  return (\r\n    <Layout\r\n      title=\"Add a new Product\"\r\n      description={`G'day ${user.name}, ready to add a new product`}\r\n    >\r\n      <div className=\"row\">\r\n        <div className=\"col-md-8 offset-md-2\">\r\n          {showLoading()}\r\n          {showSuccess()}\r\n          {showError()}\r\n          {newPostForm()}\r\n          {redirectUser()}\r\n        </div>\r\n      </div>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default UpdateProduct;\r\n","import React from \"react\";\r\nimport { BrowserRouter, Switch, Route } from \"react-router-dom\";\r\nimport Signup from \"./user/Signup\";\r\nimport Signin from \"./user/Signin\";\r\nimport Home from \"./core/Home\";\r\nimport PrivateRoute from \"./auth/PrivateRoute\";\r\nimport AdminRoute from \"./auth/AdminRoute\";\r\nimport Dashboard from \"./user/UserDashboard\";\r\nimport AdminDashboard from \"./user/AdminDashboard\";\r\nimport AddCategory from \"./admin/AddCategory\";\r\nimport AddProduct from \"./admin/AddProduct\";\r\nimport Shop from \"./core/Shop\";\r\nimport Product from \"./core/Product\";\r\nimport Cart from \"./core/Cart\";\r\nimport Orders from \"./admin/Order\";\r\nimport Profile from \"./user/Profile\";\r\nimport ManageProducts from \"./admin/ManageProducts\";\r\nimport UpdateProduct from \"./admin/UpdateProduct\";\r\n\r\nconst Routes = () => {\r\n  return (\r\n    <BrowserRouter>\r\n      <Switch>\r\n        <Route path=\"/\" exact component={Home} />\r\n        <Route path=\"/shop\" exact component={Shop} />\r\n        <Route path=\"/signin\" exact component={Signin} />\r\n        <Route path=\"/signup\" exact component={Signup} />\r\n        <PrivateRoute path=\"/user/dashboard\" exact component={Dashboard} />\r\n        <AdminRoute path=\"/admin/dashboard\" exact component={AdminDashboard} />\r\n        <AdminRoute path=\"/create/category\" exact component={AddCategory} />\r\n        <AdminRoute path=\"/create/product\" exact component={AddProduct} />\r\n        <Route path=\"/product/:productId\" exact component={Product} />\r\n        <Route path=\"/cart\" exact component={Cart} />\r\n        <AdminRoute path=\"/admin/orders\" exact component={Orders} />\r\n        <AdminRoute path=\"/admin/products\" exact component={ManageProducts} />\r\n        <PrivateRoute path=\"/profile/:userId\" exact component={Profile} />\r\n        <AdminRoute\r\n          path=\"/admin/product/update/:productId\"\r\n          exact\r\n          component={UpdateProduct}\r\n        />\r\n      </Switch>\r\n    </BrowserRouter>\r\n  );\r\n};\r\n\r\nexport default Routes;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport Routes from \"./Routes\"\n\nReactDOM.render(\n  <React.StrictMode>\n    <Routes />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}